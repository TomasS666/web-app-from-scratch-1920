{"version":3,"sources":["js/helpers/router/routie.js"],"names":["Routie","w","isModule","routes","map","reference","oldReference","Route","path","name","keys","fns","params","regex","pathToRegexp","prototype","addHandler","fn","push","removeHandler","i","c","length","f","splice","run","apply","match","m","exec","len","key","val","decodeURIComponent","toURL","param","replace","indexOf","Error","sensitive","strict","RegExp","Array","join","concat","_","slash","format","capture","optional","s","split","routie","reload","p","navigate","lookup","obj","route","remove","removeAll","options","silent","removeListener","setTimeout","window","location","hash","addListener","noConflict","getHash","substring","checkRoute","hashChanged","addEventListener","attachEvent","removeEventListener","detachEvent","module","exports"],"mappings":"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","file":"routie.6e0a45ba.js","sourceRoot":"..\\src","sourcesContent":["/*!\r\n * routie - a tiny hash router\r\n * v0.3.2\r\n * http://projects.jga.me/routie\r\n * copyright Greg Allen 2016\r\n * MIT License\r\n*/\r\nvar Routie = function(w, isModule) {\r\n\r\n  var routes = [];\r\n  var map = {};\r\n  var reference = \"routie\";\r\n  var oldReference = w[reference];\r\n\r\n  var Route = function(path, name) {\r\n    this.name = name;\r\n    this.path = path;\r\n    this.keys = [];\r\n    this.fns = [];\r\n    this.params = {};\r\n    this.regex = pathToRegexp(this.path, this.keys, false, false);\r\n\r\n  };\r\n\r\n  Route.prototype.addHandler = function(fn) {\r\n    this.fns.push(fn);\r\n  };\r\n\r\n  Route.prototype.removeHandler = function(fn) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      var f = this.fns[i];\r\n      if (fn == f) {\r\n        this.fns.splice(i, 1);\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  Route.prototype.run = function(params) {\r\n    for (var i = 0, c = this.fns.length; i < c; i++) {\r\n      this.fns[i].apply(this, params);\r\n    }\r\n  };\r\n\r\n  Route.prototype.match = function(path, params){\r\n    var m = this.regex.exec(path);\r\n\r\n    if (!m) return false;\r\n\r\n\r\n    for (var i = 1, len = m.length; i < len; ++i) {\r\n      var key = this.keys[i - 1];\r\n\r\n      var val = ('string' == typeof m[i]) ? decodeURIComponent(m[i]) : m[i];\r\n\r\n      if (key) {\r\n        this.params[key.name] = val;\r\n      }\r\n      params.push(val);\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  Route.prototype.toURL = function(params) {\r\n    var path = this.path;\r\n    for (var param in params) {\r\n      path = path.replace('/:'+param, '/'+params[param]);\r\n    }\r\n    path = path.replace(/\\/:.*\\?/g, '/').replace(/\\?/g, '');\r\n    if (path.indexOf(':') != -1) {\r\n      throw new Error('missing parameters for url: '+path);\r\n    }\r\n    return path;\r\n  };\r\n\r\n  var pathToRegexp = function(path, keys, sensitive, strict) {\r\n    if (path instanceof RegExp) return path;\r\n    if (path instanceof Array) path = '(' + path.join('|') + ')';\r\n    path = path\r\n      .concat(strict ? '' : '/?')\r\n      .replace(/\\/\\(/g, '(?:/')\r\n      .replace(/\\+/g, '__plus__')\r\n      .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, function(_, slash, format, key, capture, optional){\r\n        keys.push({ name: key, optional: !! optional });\r\n        slash = slash || '';\r\n        return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '');\r\n      })\r\n      .replace(/([\\/.])/g, '\\\\$1')\r\n      .replace(/__plus__/g, '(.+)')\r\n      .replace(/\\*/g, '(.*)');\r\n    return new RegExp('^' + path + '$', sensitive ? '' : 'i');\r\n  };\r\n\r\n  var addHandler = function(path, fn) {\r\n    var s = path.split(' ');\r\n    var name = (s.length == 2) ? s[0] : null;\r\n    path = (s.length == 2) ? s[1] : s[0];\r\n\r\n    if (!map[path]) {\r\n      map[path] = new Route(path, name);\r\n      routes.push(map[path]);\r\n    }\r\n    map[path].addHandler(fn);\r\n  };\r\n\r\n  var routie = function(path, fn) {\r\n    if (typeof fn == 'function') {\r\n      addHandler(path, fn);\r\n      routie.reload();\r\n    } else if (typeof path == 'object') {\r\n      for (var p in path) {\r\n        addHandler(p, path[p]);\r\n      }\r\n      routie.reload();\r\n    } else if (typeof fn === 'undefined') {\r\n      routie.navigate(path);\r\n    }\r\n  };\r\n\r\n  routie.lookup = function(name, obj) {\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      if (route.name == name) {\r\n        return route.toURL(obj);\r\n      }\r\n    }\r\n  };\r\n\r\n  routie.remove = function(path, fn) {\r\n    var route = map[path];\r\n    if (!route)\r\n      return;\r\n    route.removeHandler(fn);\r\n  };\r\n\r\n  routie.removeAll = function() {\r\n    map = {};\r\n    routes = [];\r\n  };\r\n\r\n  routie.navigate = function(path, options) {\r\n    options = options || {};\r\n    var silent = options.silent || false;\r\n\r\n    if (silent) {\r\n      removeListener();\r\n    }\r\n    setTimeout(function() {\r\n      window.location.hash = path;\r\n\r\n      if (silent) {\r\n        setTimeout(function() { \r\n          addListener();\r\n        }, 1);\r\n      }\r\n\r\n    }, 1);\r\n  };\r\n\r\n  routie.noConflict = function() {\r\n    w[reference] = oldReference;\r\n    return routie;\r\n  };\r\n\r\n  var getHash = function() {\r\n    return window.location.hash.substring(1);\r\n  };\r\n\r\n  var checkRoute = function(hash, route) {\r\n    var params = [];\r\n    if (route.match(hash, params)) {\r\n      route.run(params);\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  var hashChanged = routie.reload = function() {\r\n    var hash = getHash();\r\n    for (var i = 0, c = routes.length; i < c; i++) {\r\n      var route = routes[i];\r\n      if (checkRoute(hash, route)) {\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  var addListener = function() {\r\n    if (w.addEventListener) {\r\n      w.addEventListener('hashchange', hashChanged, false);\r\n    } else {\r\n      w.attachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n\r\n  var removeListener = function() {\r\n    if (w.removeEventListener) {\r\n      w.removeEventListener('hashchange', hashChanged);\r\n    } else {\r\n      w.detachEvent('onhashchange', hashChanged);\r\n    }\r\n  };\r\n  addListener();\r\n\r\n  if (isModule){\r\n    return routie;\r\n  } else {\r\n    w[reference] = routie;\r\n  }\r\n   \r\n};\r\n\r\nif (typeof module == 'undefined'){\r\n  Routie(window);\r\n} else {\r\n  module.exports = Routie(window,true);\r\n} "]}